(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{139:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var c,r,a=n(1),i=n.n(a),o=n(50),s=n.n(o),u=n(18),l=n(31),d=n(11),j=n(5),b=n(85),p=Object(d.d)("",Object(j.a)({},b.a,(function(e,t){return t.payload}))),f=n(36),h=n(96),O=n.n(h),g=n(17),x=Object(d.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isLoading:!1,isFetchingCurrentUser:!1,error:""},extraReducers:(c={},Object(j.a)(c,g.d.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(j.a)(c,g.d.pending,(function(e,t){e.isLoggedIn=!1,e.isLoading=!0,e.error=""})),Object(j.a)(c,g.d.rejected,(function(e,t){e.isLoggedIn=!1,e.isLoading=!1,e.error=t.payload.message})),Object(j.a)(c,g.b.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(j.a)(c,g.b.pending,(function(e,t){e.isLoggedIn=!1,e.isLoading=!0,e.error=""})),Object(j.a)(c,g.b.rejected,(function(e,t){e.isLoggedIn=!1,e.isLoading=!1,e.error=t.payload.message})),Object(j.a)(c,g.c.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(j.a)(c,g.c.pending,(function(e,t){e.isLoggedIn=!1,e.isLoading=!0,e.error=""})),Object(j.a)(c,g.c.rejected,(function(e,t){e.isLoggedIn=!1,e.isLoading=!1,e.error=t.payload.message})),Object(j.a)(c,g.a.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(j.a)(c,g.a.pending,(function(e,t){e.isFetchingCurrentUser=!0,e.isLoggedIn=!1,e.isLoading=!0,e.error=""})),Object(j.a)(c,g.a.rejected,(function(e,t){e.isFetchingCurrentUser=!1,e.isLoggedIn=!1,e.isLoading=!1})),c)}),v=n(46),m=Object(d.e)({name:"contacts",initialState:{contact:{name:null,number:null},allContacts:[],token:null,isLoading:!1},extraReducers:(r={},Object(j.a)(r,v.c.pending,(function(e,t){e.isLoading=!0})),Object(j.a)(r,v.c.fulfilled,(function(e,t){e.allContacts=t.payload,e.token=t.payload.token,e.isLoading=!1})),Object(j.a)(r,v.a.fulfilled,(function(e,t){e.contact=t.payload,e.token=t.payload.token})),Object(j.a)(r,v.b.fulfilled,(function(e,t){e.contact=t.payload,e.token=t.payload.token})),r)}),k=Object(l.a)(Object(d.f)({serializableCheck:{ignoredActions:[f.a,f.f,f.b,f.c,f.d,f.e]}})),y={key:"auth",storage:O.a,whitelist:["token"],blacklist:["filtered"]},L=Object(d.a)({reducer:{contacts:m.reducer,auth:Object(f.g)(y,x.reducer),filtered:p},middleware:k,devTools:!1}),w=(Object(f.h)(L),n(30)),C=(n(139),n(19)),I=function(e){return e.auth.isLoggedIn},z=function(e){return e.auth.isFetchingCurrentUser},S=function(e){return e.auth.user.name},F=n(44),T=n(60),U=n(10),P=n(2),W=["children"];function V(e){var t=e.children,n=Object(T.a)(e,W),c=Object(u.c)(I);return Object(P.jsx)(U.b,Object(F.a)(Object(F.a)({},n),{},{children:c?t:Object(P.jsx)(U.a,{to:"/login"})}))}var A=["restricted","redirectTo","children"];function R(e){var t=e.restricted,n=void 0!==t&&t,c=e.redirectTo,r=e.children,a=Object(T.a)(e,A),i=Object(u.c)(I)&&n;return Object(P.jsx)(U.b,Object(F.a)(Object(F.a)({},a),{},{children:i?Object(P.jsx)(U.a,{exact:!0,to:c}):r}))}var B,E,H,J,M,D,q,G=n(14),K=n(23),N=K.a.div(B||(B=Object(G.a)(["\n  display: flex;\n  align-items: center;\n"]))),Q=n(81),X=n(189),Y=function(){var e=Object(u.c)(I);return Object(P.jsxs)(N,{children:[Object(P.jsx)(w.c,{exact:!0,to:"/",children:Object(P.jsx)(X.a,{variant:"outlined",sx:{mr:1},children:"Home"})}),e?Object(P.jsx)(w.c,{exact:!0,to:"/contacts",children:Object(P.jsx)(X.a,{size:"medium",variant:"outlined",children:"Contacts"})}):Object(P.jsx)(w.c,{exact:!0,to:"/contacts",children:Object(P.jsxs)(X.a,{children:["Contacts",Object(P.jsx)(Q.a,{style:{marginLeft:5}})]})})]})},Z=K.a.div(E||(E=Object(G.a)(["\n  display: flex;\n  align-items: center;\n"]))),$=function(){return Object(P.jsxs)(Z,{children:[Object(P.jsx)(w.c,{to:"/login",children:Object(P.jsx)(X.a,{size:"medium",variant:"outlined",children:"Log in"})}),Object(P.jsx)(w.c,{to:"/signup",children:Object(P.jsx)(X.a,{size:"medium",variant:"outlined",sx:{ml:1},children:"Sign Up"})})]})},_=K.a.div(H||(H=Object(G.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),ee=K.a.h2(J||(J=Object(G.a)(["\n  font-weight: 400;\n"]))),te=K.a.span(M||(M=Object(G.a)(["\n  font-weight: 600;\n  font-size: 24px;\n"]))),ne=n(184),ce=function(){var e=Object(u.b)(),t=Object(u.c)(S);return Object(P.jsx)(ne.a,{children:Object(P.jsxs)(_,{children:[Object(P.jsxs)(ee,{children:["Online: ",Object(P.jsx)(te,{children:t})]}),Object(P.jsx)(X.a,{sx:{ml:1},size:"medium",variant:"contained",type:"button",onClick:function(){return e(g.c())},children:"Log out"})]})})},re=K.a.header(D||(D=Object(G.a)(["\n  padding: 10px;\n  display: flex;\n  justify-content: space-between;\n  background-color: #ffffff3d;\n  border-bottom: 1px solid #817e7e;\n  /* box-shadow: 1px 3px 10px -4px #050505; */\n  align-items: center;\n"]))),ae=n(190),ie=n(101),oe=n.n(ie),se=n(100),ue=n.n(se),le=function(e){var t=e.onClick,n=e.theme,c=Object(u.c)(I);return Object(P.jsx)(ne.a,{children:Object(P.jsxs)(re,{children:[Object(P.jsx)(Y,{}),Object(P.jsx)(ae.a,{sx:{ml:1},onClick:t,children:"dark"===n.palette.mode?Object(P.jsx)(ue.a,{}):Object(P.jsx)(oe.a,{})}),c?Object(P.jsx)(ce,{}):Object(P.jsx)($,{})]})})},de=n(39),je=K.a.div(q||(q=Object(G.a)(["\n  margin: 0;\n  padding: 0;\n  position: fixed;\n  top: 40%;\n  left: 47%;\n"]))),be=n(102),pe=n.n(be),fe=function(){return Object(P.jsx)(je,{children:Object(P.jsx)(pe.a,{type:"TailSpin",color:"#1976d2",height:46,width:46})})},he=n(103),Oe=n(188),ge=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,235))})),xe=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(7),n.e(8)]).then(n.bind(null,232))})),ve=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,236))})),me=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,237))})),ke=function(){var e=Object(a.useState)(!1),t=Object(C.a)(e,2),n=t[0],c=t[1],r=Object(u.b)(),i=Object(u.c)(z);Object(a.useEffect)((function(){r(g.a())}),[r]);var o=Object(a.useMemo)((function(){return Object(he.a)({palette:{mode:n?"dark":"light"}})}),[n]);return!i&&Object(P.jsxs)(Oe.a,{theme:o,children:[Object(P.jsx)(de.a,{position:"top-center"}),Object(P.jsx)(le,{onClick:function(){c(!n)},theme:o}),Object(P.jsx)(U.d,{children:Object(P.jsxs)(a.Suspense,{fallback:Object(P.jsx)(fe,{type:"TailSpin",height:26,width:26}),children:[Object(P.jsx)(R,{exact:!0,path:"/",children:Object(P.jsx)(ge,{})}),Object(P.jsx)(R,{path:"/signup",restricted:!0,redirectTo:"/contacts",children:Object(P.jsx)(ve,{})}),Object(P.jsx)(R,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(P.jsx)(me,{})}),Object(P.jsx)(V,{path:"/contacts",children:Object(P.jsx)(xe,{})})]})})]})},ye=function(e){e&&e instanceof Function&&n.e(9).then(n.bind(null,230)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};s.a.render(Object(P.jsx)(i.a.StrictMode,{children:Object(P.jsx)(u.a,{store:L,children:Object(P.jsx)(w.a,{children:Object(P.jsx)(ke,{})})})}),document.getElementById("root")),ye()},17:function(e,t,n){"use strict";n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return O}));var c=n(13),r=n.n(c),a=n(34),i=n(25),o=n.n(i),s=n(11),u=n(39),l=n(97),d=n(2);o.a.defaults.baseURL="https://connections-api.herokuapp.com/";var j=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},b=function(){o.a.defaults.headers.common.Authorization=""},p=Object(s.c)("auth/signup",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("users/signup",t);case 3:return c=e.sent,a=c.data,j(a.token),u.b.success("Enjoy Phonebook App, ".concat(a.user.name)),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),u.b.error(e.t0.message),e.abrupt("return",n.rejectWithValue(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(s.c)("auth/login",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("users/login",t);case 3:return c=e.sent,a=c.data,j(a.token),u.b.success("Wellcome back, ".concat(a.user.name)),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),u.b.error(e.t0.message),e.abrupt("return",n.rejectWithValue(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()),h=Object(s.c)("auth/logout",function(){var e=Object(a.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("users/logout",t);case 3:b(),u.b.loading("Have a nice day!",{duration:4e3,icon:Object(d.jsx)(l.a,{})}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",n.rejectWithValue(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()),O=Object(s.c)("auth/fetchCurrentUser",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getState(),null!==(a=c.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return j(a),e.prev=5,e.next=8,o.a.get("users/current");case 8:return i=e.sent,s=i.data,e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",n.rejectWithValue(e.t0));case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},46:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var c=n(13),r=n.n(c),a=n(34),i=n(25),o=n.n(i),s=n(11);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var u=Object(s.c)("contacts/get-contacts",function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("/contacts",t);case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),l=Object(s.c)("contacts/create-contact",function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/contacts",t);case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),d=Object(s.c)("contacts/delete-contact",function(){var e=Object(a.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.delete("/contacts/".concat(t),t);case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}());Object(s.c)("contacts/update-contact",function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.patch("/contacts/".concat(t.id),t);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}())},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(11),r=Object(c.b)("contacts/filtered")}},[[160,2,3]]]);
//# sourceMappingURL=main.bc978976.chunk.js.map